import{j as r,r as t}from"./index-DCjzbjsf.js";import{M as h}from"./MultiplayerGameWrapper-BYxFp8-j.js";import"./clipboard-BzhqdYiY.js";import"./copy-Di-wJUyf.js";import"./link-FFsNmX7Y.js";const b=({socket:e,roomId:l,isPlayer1:s,gameState:i,setGameState:j,gameStarted:a,onRestart:f})=>{const[n,o]=t.useState("waiting"),[c,u]=t.useState(null),[x,m]=t.useState(0);t.useEffect(()=>{if(a&&s){const d=2e3+Math.random()*3e3;setTimeout(()=>{const p=Date.now();e==null||e.emit("make_move",{roomId:l,move:{signal:p}}),m(p),o("go")},d)}},[a]),t.useEffect(()=>{i!=null&&i.signal&&(m(i.signal),o("go")),i!=null&&i.winner&&(u(i.winner===(s?"p1":"p2")?"You Won!":"You Lost!"),o("ended"))},[i]);const w=()=>{if(n==="go"){const d=Date.now()-x;e==null||e.emit("make_move",{roomId:l,move:{winner:s?"p1":"p2",time:d}}),o("ended"),u("You Won!")}else(n==="waiting"||n==="ready")&&(u("Too Early! You Lost!"),o("ended"),e==null||e.emit("make_move",{roomId:l,move:{winner:s?"p2":"p1",reason:"early"}}))};return r.jsxs("div",{onMouseDown:w,className:`
        w-full h-96 rounded-2xl flex flex-col items-center justify-center cursor-pointer select-none transition-colors
        ${n==="waiting"?"bg-yellow-500":""}
        ${n==="go"?"bg-green-500":""}
        ${n==="ended"?"bg-blue-500":""}
      `,children:[r.jsxs("h1",{className:"text-6xl font-bold text-white",children:[n==="waiting"&&"Wait for Green...",n==="go"&&"CLICK!",n==="ended"&&c]}),n==="ended"&&r.jsx("button",{onClick:f,className:"mt-8 px-8 py-3 bg-white text-blue-600 rounded-xl font-bold",children:"Rematch"})]})},E=()=>r.jsx(h,{gameType:"reaction",children:e=>r.jsx(b,{...e})});export{E as default};
