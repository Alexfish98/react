import{r as d,j as e,O as x,F as f}from"./index-DCjzbjsf.js";import{P as y}from"./PDFButton-DPqdV8AZ.js";const w=()=>{const[s,l]=d.useState(null),[a,p]=d.useState(""),[n,c]=d.useState(!1),m=r=>{var t;(t=r.target.files)!=null&&t[0]&&l(r.target.files[0])},g=async()=>{if(!(!s||!a)){c(!0);try{const r=await s.arrayBuffer(),t=await y.load(r);t.encrypt({userPassword:a,ownerPassword:a,permissions:{printing:"highResolution",modifying:!1,copying:!1,annotating:!1,fillingForms:!1,contentAccessibility:!1,documentAssembly:!1}});const b=await t.save(),u=new Blob([b],{type:"application/pdf"}),i=URL.createObjectURL(u),o=document.createElement("a");o.href=i,o.download=`protected-${s.name}`,o.click(),URL.revokeObjectURL(i)}catch(r){console.error("Error protecting PDF:",r),alert("Failed to protect PDF.")}finally{c(!1)}}};return e.jsx("div",{className:"max-w-xl mx-auto space-y-8",children:s?e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-2xl border border-gray-200 dark:border-gray-700 space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 pb-6 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-lg text-red-600 dark:text-red-400",children:e.jsx(f,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white truncate",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(s.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx("button",{onClick:()=>l(null),className:"text-sm text-red-500 hover:text-red-600",children:"Change"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Set Password"}),e.jsx("input",{type:"password",value:a,onChange:r=>p(r.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 focus:ring-2 focus:ring-primary-500 outline-none",placeholder:"Enter a strong password"})]}),e.jsx("button",{onClick:g,disabled:!a||n,className:"w-full py-4 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold transition-all active:scale-95 shadow-lg shadow-primary-600/20 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Encrypting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{size:20}),e.jsx("span",{children:"Protect PDF"})]})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-2xl p-12 text-center hover:border-primary-500 transition-colors bg-gray-50 dark:bg-gray-800/50",children:[e.jsx("input",{type:"file",accept:".pdf",onChange:m,className:"hidden",id:"pdf-upload-protect"}),e.jsxs("label",{htmlFor:"pdf-upload-protect",className:"cursor-pointer flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-100 dark:bg-blue-900/30 rounded-full shadow-sm text-blue-600 dark:text-blue-400",children:e.jsx(x,{size:48})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Upload PDF to Protect"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Add a password to your document"})]})]})]})})};export{w as default};
