import{j as o,r as x}from"./index-DCjzbjsf.js";import{M as z}from"./MultiplayerGameWrapper-BYxFp8-j.js";import"./clipboard-BzhqdYiY.js";import"./copy-Di-wJUyf.js";import"./link-FFsNmX7Y.js";const C=({socket:i,roomId:A,isPlayer1:a,gameState:n,setGameState:E,gameStarted:G,myTurn:$,setMyTurn:b})=>{const[p,h]=x.useState(Array(24).fill(null)),[m,v]=x.useState(Array(9).fill(null)),[g,j]=x.useState({p1:0,p2:0});x.useEffect(()=>{n!=null&&n.lines&&(h(n.lines),v(n.boxes),j(n.scores),b(n.turn===(a?1:2)))},[n]);const y=c=>{if(!$||p[c])return;const s=[...p];s[c]=a?"p1":"p2";const e=[...m];let r=!1;const B=(t,l,f,u,d)=>{!e[t]&&s[l]&&s[f]&&s[u]&&s[d]&&(e[t]=a?"p1":"p2",r=!0)};for(let t=0;t<3;t++)for(let l=0;l<3;l++){const f=t*3+l,u=t*3+l,d=(t+1)*3+l,M=12+l*4+t,_=12+(l+1)*4+t;B(f,u,d,M,_)}const w={p1:e.filter(t=>t==="p1").length,p2:e.filter(t=>t==="p2").length};h(s),v(e),j(w);const N=r?a?1:2:a?2:1;b(N===(a?1:2)),i==null||i.emit("make_move",{roomId:A,move:{lines:s,boxes:e,scores:w,turn:N}})};return o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsxs("div",{className:"flex justify-between w-full max-w-xs mb-8 font-bold text-xl",children:[o.jsxs("div",{className:"text-blue-500",children:["P1: ",g.p1]}),o.jsxs("div",{className:"text-red-500",children:["P2: ",g.p2]})]}),o.jsxs("div",{className:"relative",style:{width:"300px",height:"300px"},children:[Array(16).fill(0).map((c,s)=>{const e=Math.floor(s/4),r=s%4;return o.jsx("div",{className:"absolute w-4 h-4 bg-gray-800 rounded-full z-20",style:{top:e*100-8,left:r*100-8}},`dot-${s}`)}),Array(12).fill(0).map((c,s)=>{const e=Math.floor(s/3),r=s%3;return o.jsx("div",{onClick:()=>y(s),className:`absolute h-4 cursor-pointer transition-colors z-10 ${p[s]?p[s]==="p1"?"bg-blue-500":"bg-red-500":"bg-gray-200 hover:bg-gray-400"}`,style:{top:e*100-8,left:r*100+8,width:84}},`h-${s}`)}),Array(12).fill(0).map((c,s)=>{const e=Math.floor(s/4),r=s%4;return o.jsx("div",{onClick:()=>y(12+s),className:`absolute w-4 cursor-pointer transition-colors z-10 ${p[12+s]?p[12+s]==="p1"?"bg-blue-500":"bg-red-500":"bg-gray-200 hover:bg-gray-400"}`,style:{top:r*100+8,left:e*100-8,height:84}},`v-${s}`)}),m.map((c,s)=>{const e=Math.floor(s/3),r=s%3;return c?o.jsx("div",{className:`absolute w-20 h-20 opacity-50 ${c==="p1"?"bg-blue-300":"bg-red-300"}`,style:{top:e*100+10,left:r*100+10}},`box-${s}`):null})]})]})},W=()=>o.jsx(z,{gameType:"dots",children:i=>o.jsx(C,{...i})});export{W as default};
