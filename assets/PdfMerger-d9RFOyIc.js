import{r as g,j as e,F as x,a as v,I as w}from"./index-DCjzbjsf.js";import{P as p}from"./PDFButton-DPqdV8AZ.js";const P=()=>{const[t,l]=g.useState([]),[i,c]=g.useState(!1),h=r=>{r.target.files&&l(s=>[...s,...Array.from(r.target.files||[])])},f=r=>{l(s=>s.filter((a,o)=>o!==r))},n=(r,s)=>{if(s==="up"&&r>0){const a=[...t];[a[r-1],a[r]]=[a[r],a[r-1]],l(a)}else if(s==="down"&&r<t.length-1){const a=[...t];[a[r+1],a[r]]=[a[r],a[r+1]],l(a)}},y=async()=>{if(!(t.length<2)){c(!0);try{const r=await p.create();for(const b of t){const u=await b.arrayBuffer(),m=await p.load(u);(await r.copyPages(m,m.getPageIndices())).forEach(j=>r.addPage(j))}const s=await r.save(),a=new Blob([s],{type:"application/pdf"}),o=URL.createObjectURL(a),d=document.createElement("a");d.href=o,d.download="merged-document.pdf",d.click(),URL.revokeObjectURL(o)}catch(r){console.error("Error merging PDFs:",r),alert("Failed to merge PDFs. Ensure files are valid and not password protected.")}finally{c(!1)}}};return e.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-2xl p-8 text-center hover:border-primary-500 transition-colors bg-gray-50 dark:bg-gray-800/50",children:[e.jsx("input",{type:"file",accept:".pdf",multiple:!0,onChange:h,className:"hidden",id:"pdf-upload"}),e.jsxs("label",{htmlFor:"pdf-upload",className:"cursor-pointer flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-red-100 dark:bg-red-900/30 rounded-full shadow-sm text-red-600 dark:text-red-400",children:e.jsx(x,{size:32})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Click to add PDFs"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Add multiple files to merge"})]})]})]}),t.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-900",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white",children:["Files to Merge (",t.length,")"]}),e.jsx("button",{onClick:()=>l([]),className:"text-xs text-red-500 hover:text-red-600",children:"Clear All"})]}),e.jsx("ul",{className:"divide-y divide-gray-100 dark:divide-gray-800 max-h-96 overflow-y-auto",children:t.map((r,s)=>e.jsxs("li",{className:"p-3 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors group",children:[e.jsxs("div",{className:"flex items-center space-x-3 overflow-hidden",children:[e.jsx("span",{className:"text-xs font-mono text-gray-400 w-6 text-center",children:s+1}),e.jsx(x,{size:18,className:"text-red-400 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:r.name})]}),e.jsxs("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>n(s,"up"),disabled:s===0,className:"p-1 text-gray-400 hover:text-primary-500 disabled:opacity-30",children:"↑"}),e.jsx("button",{onClick:()=>n(s,"down"),disabled:s===t.length-1,className:"p-1 text-gray-400 hover:text-primary-500 disabled:opacity-30",children:"↓"}),e.jsx("button",{onClick:()=>f(s),className:"p-1 text-gray-400 hover:text-red-500",children:e.jsx(v,{size:16})})]})]},s))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:y,disabled:t.length<2||i,className:"flex items-center space-x-2 px-8 py-4 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold transition-all active:scale-95 shadow-lg shadow-primary-600/20 disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Merging..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{size:20}),e.jsx("span",{children:"Merge PDFs"})]})})})]})};export{P as default};
