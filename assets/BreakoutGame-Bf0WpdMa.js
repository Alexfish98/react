import{r as c,j as r}from"./index-DCjzbjsf.js";import{R as j}from"./rotate-ccw-CttIh6eq.js";import{P as R}from"./play-C34xKSmD.js";const O=()=>{const b=c.useRef(null),[n,u]=c.useState(!1),[x,f]=c.useState(0),[p,h]=c.useState(3),[o,m]=c.useState(!1),i=c.useRef({ball:{x:300,y:300,dx:4,dy:-4,radius:6},paddle:{x:250,y:380,width:100,height:10},bricks:[],width:600,height:400,brickRowCount:5,brickColumnCount:8,brickWidth:60,brickHeight:20,brickPadding:10,brickOffsetTop:30,brickOffsetLeft:25});c.useEffect(()=>{y()},[]);const y=()=>{const e=i.current;e.bricks=[];for(let t=0;t<e.brickColumnCount;t++)for(let l=0;l<e.brickRowCount;l++)e.bricks.push({x:0,y:0,status:1})};c.useEffect(()=>{const e=t=>{if(!b.current)return;const l=b.current.getBoundingClientRect(),a=t.clientX-l.left,s=i.current.width/l.width,d=a*s;d>0&&d<i.current.width&&(i.current.paddle.x=d-i.current.paddle.width/2)};if(n){window.addEventListener("mousemove",e);const t=requestAnimationFrame(k);return()=>{window.removeEventListener("mousemove",e),cancelAnimationFrame(t)}}},[n]);const k=()=>{n&&(w(),v(),n&&!o&&requestAnimationFrame(k))},w=()=>{const e=i.current;if(e.ball.x+=e.ball.dx,e.ball.y+=e.ball.dy,(e.ball.x+e.ball.radius>e.width||e.ball.x-e.ball.radius<0)&&(e.ball.dx*=-1),e.ball.y-e.ball.radius<0&&(e.ball.dy*=-1),e.ball.y+e.ball.radius>e.paddle.y&&e.ball.x>e.paddle.x&&e.ball.x<e.paddle.x+e.paddle.width){e.ball.dy=-Math.abs(e.ball.dy);const t=e.ball.x-(e.paddle.x+e.paddle.width/2);e.ball.dx=t*.15}for(let t=0;t<e.bricks.length;t++){const l=e.bricks[t];l.status===1&&e.ball.x>l.x&&e.ball.x<l.x+e.brickWidth&&e.ball.y>l.y&&e.ball.y<l.y+e.brickHeight&&(e.ball.dy*=-1,l.status=0,f(a=>a+10),x+10===e.brickRowCount*e.brickColumnCount*10&&(alert("YOU WIN, CONGRATS!"),document.location.reload()))}e.ball.y+e.ball.radius>e.height&&h(t=>{const l=t-1;return l<=0?(m(!0),u(!1)):(e.ball.x=e.width/2,e.ball.y=e.height-30,e.ball.dx=4,e.ball.dy=-4,e.paddle.x=(e.width-e.paddle.width)/2),l})},v=()=>{var l;const e=(l=b.current)==null?void 0:l.getContext("2d");if(!e)return;const t=i.current;e.clearRect(0,0,t.width,t.height);for(let a=0;a<t.brickColumnCount;a++)for(let s=0;s<t.brickRowCount;s++)if(t.bricks[a*t.brickRowCount+s].status===1){const d=a*(t.brickWidth+t.brickPadding)+t.brickOffsetLeft,g=s*(t.brickHeight+t.brickPadding)+t.brickOffsetTop;t.bricks[a*t.brickRowCount+s].x=d,t.bricks[a*t.brickRowCount+s].y=g,e.beginPath(),e.rect(d,g,t.brickWidth,t.brickHeight),e.fillStyle=`hsl(${a*45}, 70%, 50%)`,e.fill(),e.closePath()}e.beginPath(),e.arc(t.ball.x,t.ball.y,t.ball.radius,0,Math.PI*2),e.fillStyle="#ffffff",e.fill(),e.closePath(),e.beginPath(),e.rect(t.paddle.x,t.paddle.y,t.paddle.width,t.paddle.height),e.fillStyle="#3b82f6",e.fill(),e.closePath()},C=()=>{f(0),h(3),m(!1),y(),i.current.ball={x:300,y:300,dx:4,dy:-4,radius:6},u(!0)};return r.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Score: ",x]}),r.jsxs("div",{className:"text-xl font-bold text-red-500",children:["Lives: ",p]})]}),r.jsxs("div",{className:"relative rounded-xl overflow-hidden shadow-lg border border-gray-700 bg-gray-900",children:[r.jsx("canvas",{ref:b,width:"600",height:"400",className:"w-full h-auto block cursor-none"}),(!n||o)&&r.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:r.jsxs("div",{className:"text-center space-y-4",children:[o&&r.jsx("div",{className:"text-red-500 font-bold text-3xl",children:"Game Over"}),r.jsxs("button",{onClick:C,className:"px-8 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold transition-colors flex items-center space-x-2 mx-auto",children:[o?r.jsx(j,{size:20}):r.jsx(R,{size:20}),r.jsx("span",{children:o?"Try Again":"Start Game"})]})]})})]}),r.jsx("p",{className:"text-center text-sm text-gray-500",children:"Move mouse to control paddle."})]})};export{O as default};
