import{r as s,j as t}from"./index-DCjzbjsf.js";import{R as N}from"./rotate-ccw-CttIh6eq.js";import{P as E}from"./play-C34xKSmD.js";const G=()=>{const g=s.useRef(null),[o,m]=s.useState([{x:10,y:10}]),[i,u]=s.useState({x:15,y:15}),[a,r]=s.useState({x:0,y:0}),[y,h]=s.useState(0),[x,b]=s.useState(!1),[d,j]=s.useState(!1),[p,v]=s.useState(0),n=20,f=20;s.useEffect(()=>{const e=localStorage.getItem("snake_highscore");e&&v(parseInt(e))},[]),s.useEffect(()=>{const e=l=>{if(d)switch(l.key){case"ArrowUp":a.y!==1&&r({x:0,y:-1});break;case"ArrowDown":a.y!==-1&&r({x:0,y:1});break;case"ArrowLeft":a.x!==1&&r({x:-1,y:0});break;case"ArrowRight":a.x!==-1&&r({x:1,y:0});break}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[d,a]),s.useEffect(()=>{if(!d)return;const e=setInterval(w,100);return()=>clearInterval(e)},[d,o,a]);const w=()=>{if(x)return;const e={x:o[0].x+a.x,y:o[0].y+a.y};if(e.x<0||e.x>=f||e.y<0||e.y>=f){k();return}if(o.some(c=>c.x===e.x&&c.y===e.y)){k();return}const l=[e,...o];e.x===i.x&&e.y===i.y?(h(c=>c+1),u({x:Math.floor(Math.random()*f),y:Math.floor(Math.random()*f)})):l.pop(),m(l)},k=()=>{b(!0),j(!1),y>p&&(v(y),localStorage.setItem("snake_highscore",y.toString()))},S=()=>{m([{x:10,y:10}]),u({x:15,y:15}),r({x:1,y:0}),h(0),b(!1),j(!0)};return s.useEffect(()=>{var l;const e=(l=g.current)==null?void 0:l.getContext("2d");e&&(e.fillStyle="#1f2937",e.fillRect(0,0,400,400),e.fillStyle="#10b981",o.forEach(c=>e.fillRect(c.x*n,c.y*n,n-2,n-2)),e.fillStyle="#ef4444",e.fillRect(i.x*n,i.y*n,n-2,n-2))},[o,i]),t.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold",children:"Score"}),t.jsx("div",{className:"text-2xl font-bold text-primary-600",children:y})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xs text-gray-500 uppercase font-bold",children:"Best"}),t.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p})]})]}),t.jsxs("div",{className:"relative rounded-xl overflow-hidden shadow-lg border border-gray-700",children:[t.jsx("canvas",{ref:g,width:"400",height:"400",className:"w-full h-auto block"}),(!d||x)&&t.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:t.jsxs("div",{className:"text-center space-y-4",children:[x&&t.jsx("div",{className:"text-red-500 font-bold text-2xl",children:"Game Over!"}),t.jsxs("button",{onClick:S,className:"px-8 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-bold transition-colors flex items-center space-x-2 mx-auto",children:[x?t.jsx(N,{size:20}):t.jsx(E,{size:20}),t.jsx("span",{children:x?"Try Again":"Start Game"})]}),t.jsx("p",{className:"text-gray-300 text-sm",children:"Use Arrow Keys to Move"})]})})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:hidden",children:[t.jsx("div",{}),t.jsx("button",{onClick:()=>r({x:0,y:-1}),className:"p-4 bg-gray-200 dark:bg-gray-700 rounded-lg flex justify-center",children:"↑"}),t.jsx("div",{}),t.jsx("button",{onClick:()=>r({x:-1,y:0}),className:"p-4 bg-gray-200 dark:bg-gray-700 rounded-lg flex justify-center",children:"←"}),t.jsx("button",{onClick:()=>r({x:0,y:1}),className:"p-4 bg-gray-200 dark:bg-gray-700 rounded-lg flex justify-center",children:"↓"}),t.jsx("button",{onClick:()=>r({x:1,y:0}),className:"p-4 bg-gray-200 dark:bg-gray-700 rounded-lg flex justify-center",children:"→"})]})]})};export{G as default};
