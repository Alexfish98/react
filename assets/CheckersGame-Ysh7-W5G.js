import{r as x,j as o}from"./index-DCjzbjsf.js";import{R as M}from"./rotate-ccw-CttIh6eq.js";const K=()=>{const[d,j]=x.useState(w()),[m,v]=x.useState("red"),[l,p]=x.useState(null),[N,y]=x.useState([]);function w(){const r=Array(8).fill(0).map(()=>Array(8).fill(0));for(let s=0;s<8;s++)for(let e=0;e<8;e++)(s+e)%2===1&&(s<3&&(r[s][e]=2),s>4&&(r[s][e]=1));return r}const S=(r,s)=>{const e=d[r][s];e!==0&&(m==="red"&&e!==1&&e!==3||m==="black"&&e!==2&&e!==4||(p({r,c:s}),$(r,s,e)))},$=(r,s,e)=>{const t=[],n=e>2,a=e===1||e===3,i=[];(a||n)&&i.push([-1,-1],[-1,1]),(!a||n)&&i.push([1,-1],[1,1]),i.forEach(([c,k])=>{const u=r+c,f=s+k;if(u>=0&&u<8&&f>=0&&f<8)if(d[u][f]===0)t.push({r:u,c:f});else{const b=d[u][f];if(a?b===2||b===4:b===1||b===3){const g=u+c,h=f+k;g>=0&&g<8&&h>=0&&h<8&&d[g][h]===0&&t.push({r:g,c:h})}}}),y(t)},C=(r,s)=>{if(!l)return;const{r:e,c:t}=l,n=d.map(i=>[...i]),a=n[e][t];if(n[r][s]=a,n[e][t]=0,Math.abs(r-e)===2){const i=(r+e)/2,c=(s+t)/2;n[i][c]=0}a===1&&r===0&&(n[r][s]=3),a===2&&r===7&&(n[r][s]=4),j(n),v(m==="red"?"black":"red"),p(null),y([])},E=()=>{j(w()),v("red"),p(null),y([])};return o.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"font-bold text-gray-900 dark:text-white",children:["Turn: ",o.jsx("span",{className:m==="red"?"text-red-500":"text-gray-500",children:m.toUpperCase()})]}),o.jsx("button",{onClick:E,className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:o.jsx(M,{size:20})})]}),o.jsx("div",{className:"grid grid-cols-8 gap-0 border-4 border-amber-800 rounded-lg overflow-hidden",children:d.map((r,s)=>r.map((e,t)=>{const n=(s+t)%2===1,a=N.some(c=>c.r===s&&c.c===t),i=(l==null?void 0:l.r)===s&&(l==null?void 0:l.c)===t;return o.jsxs("div",{onClick:()=>{a?C(s,t):S(s,t)},className:`
                  aspect-square flex items-center justify-center relative
                  ${n?"bg-amber-900":"bg-amber-100"}
                  ${a?"cursor-pointer":""}
                `,children:[a&&o.jsx("div",{className:"absolute w-4 h-4 bg-green-500/50 rounded-full animate-pulse"}),e!==0&&o.jsx("div",{className:`
                      w-[80%] h-[80%] rounded-full shadow-lg border-4 transition-transform
                      ${e===1||e===3?"bg-red-600 border-red-800":"bg-gray-800 border-black"}
                      ${i?"scale-110 ring-4 ring-yellow-400":""}
                    `,children:(e===3||e===4)&&o.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-bold text-xs",children:"K"})})]},`${s}-${t}`)}))})]})};export{K as default};
