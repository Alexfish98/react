import{r as n,j as s,P as C,a as N,D}from"./index-DCjzbjsf.js";import{E as S}from"./eraser-DMvJxQT4.js";const R=()=>{const o=n.useRef(null),[b,h]=n.useState(!1),[f,w]=n.useState("#000000"),[u,y]=n.useState(5),[a,g]=n.useState("pen");n.useEffect(()=>{const e=o.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;const t=e.getContext("2d");t&&(t.lineCap="round",t.lineJoin="round",t.fillStyle="#ffffff",t.fillRect(0,0,e.width,e.height))}},[]);const x=e=>{h(!0),c(e)},i=()=>{h(!1);const e=o.current,t=e==null?void 0:e.getContext("2d");t&&t.beginPath()},c=e=>{if(!b)return;const t=o.current,r=t==null?void 0:t.getContext("2d");if(!t||!r)return;const p=t.getBoundingClientRect();let l,d;"touches"in e?(l=e.touches[0].clientX,d=e.touches[0].clientY):(l=e.clientX,d=e.clientY);const m=l-p.left,v=d-p.top;r.lineWidth=u,r.strokeStyle=a==="eraser"?"#ffffff":f,r.lineTo(m,v),r.stroke(),r.beginPath(),r.moveTo(m,v)},j=()=>{const e=o.current,t=e==null?void 0:e.getContext("2d");e&&t&&(t.fillStyle="#ffffff",t.fillRect(0,0,e.width,e.height))},k=()=>{const e=o.current;if(e){const t=document.createElement("a");t.download="sketch.png",t.href=e.toDataURL(),t.click()}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>g("pen"),className:`p-2 rounded-lg transition-colors ${a==="pen"?"bg-primary-100 text-primary-600":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:s.jsx(C,{size:20})}),s.jsx("button",{onClick:()=>g("eraser"),className:`p-2 rounded-lg transition-colors ${a==="eraser"?"bg-primary-100 text-primary-600":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:s.jsx(S,{size:20})})]}),s.jsx("div",{className:"h-6 w-px bg-gray-200 dark:bg-gray-700"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"color",value:f,onChange:e=>w(e.target.value),className:"h-8 w-8 rounded cursor-pointer border-0",disabled:a==="eraser"}),s.jsx("input",{type:"range",min:"1",max:"50",value:u,onChange:e=>y(parseInt(e.target.value)),className:"w-24"})]}),s.jsx("div",{className:"flex-1"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:j,className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Clear",children:s.jsx(N,{size:20})}),s.jsx("button",{onClick:k,className:"p-2 text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors",title:"Download",children:s.jsx(D,{size:20})})]})]}),s.jsx("div",{className:"relative w-full h-[600px] bg-white rounded-xl border border-gray-200 shadow-inner overflow-hidden touch-none",children:s.jsx("canvas",{ref:o,className:"w-full h-full cursor-crosshair",onMouseDown:x,onMouseUp:i,onMouseMove:c,onMouseLeave:i,onTouchStart:x,onTouchEnd:i,onTouchMove:c})})]})};export{R as default};
