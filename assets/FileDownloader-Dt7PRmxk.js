import{r as o,j as e,D as u,C as f}from"./index-DCjzbjsf.js";import{L as h}from"./link-FFsNmX7Y.js";const j=()=>{const[t,m]=o.useState(""),[r,d]=o.useState(!1),[i,n]=o.useState(""),x=async()=>{var l;if(t){d(!0),n("");try{let s;try{s=await fetch(t)}catch{s=await fetch(`/api/proxy.php?url=${encodeURIComponent(t)}`)}if(!s.ok)throw new Error(`Failed to fetch file: ${s.statusText}`);const p=await s.blob(),c=window.URL.createObjectURL(p),a=document.createElement("a");a.href=c;const b=((l=t.split("/").pop())==null?void 0:l.split("?")[0])||"download";a.download=b,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(c)}catch(s){n(s.message||"Download failed. The server might block cross-origin requests.")}finally{d(!1)}}};return e.jsxs("div",{className:"max-w-xl mx-auto space-y-8",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl text-sm text-blue-800 dark:text-blue-200",children:"This tool helps download files that might be tricky to download directly (like images displaying in browser instead of downloading). It uses a CORS proxy if direct access fails."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block font-bold",children:"File URL"}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(h,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",value:t,onChange:l=>m(l.target.value),placeholder:"https://example.com/image.png",className:"w-full pl-10 p-3 rounded-xl border dark:bg-gray-800 dark:border-gray-700"})]})}),e.jsx("button",{onClick:x,disabled:r||!t,className:"w-full py-4 bg-primary-600 text-white rounded-xl font-bold flex items-center justify-center disabled:opacity-50",children:r?"Downloading...":e.jsxs(e.Fragment,{children:[e.jsx(u,{size:18,className:"mr-2"})," Download File"]})})]}),i&&e.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 text-red-600 rounded-xl flex items-center",children:[e.jsx(f,{size:20,className:"mr-2"}),i]})]})};export{j as default};
